<!doctype html>
<html lang="en" ng-app="app">

	<head>
		<meta charset="utf-8">
		<script src="jquery.min.js"></script>
		<script src="jquery-ui.min.js"></script>
		<script src="beta.js"></script>
		<script src="jquery-touch-gestures.min.js"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="styles.css" />
		<script src="../vendors/angular.js"></script>
		<script src="index.js"></script>
		<style>
			.foreign-hover {
				background-color: purple;
			}
			.self-hover {
				background-color: blue;
			}
		</style>
		<script>
            var app = angular.module('app', []).controller('TestCtrl', function($scope) {
                $scope.items1 = [{t: "a"}, {t: "b"}, {t: "c"}, {t: "d"}];
                $scope.items2 = [{t: "1"}, {t: "2"}, {t: "3"}, {t: "4"}];
                $scope.directive_variable1 = "directive1";
                $scope.directive_variable2 = "directive2";
            }).directive('diMain', function ($compile) {
                return {
                    restrict : 'E',
                    templateUrl : "main.html",
                    replace : true,
                    link: function (scope, element, attrs) {
                        replace_directive(scope, element, $compile);
                    }
                };
            }).directive('dir1', function() {
                return {
                    restrict : 'E',
                    templateUrl : "directive_dir1.html",
                    replace : true,
                    link : function(scope, element) {
						add_hover_target(element, element, "self-hover");
						add_hover_target(element, "directive2", "foreign-hover");
						draggable_list(element, "doodad", "focus", "unfocus", {
							finish: function () {
								droppable_list(element, this, $("directive2"), scope.items1, scope.items2, scope);
                        }});
                    }
                };
            }).directive('dir2', function() {
                return {
                    restrict : 'E',
                    templateUrl : "directive_dir2.html",
                    replace : true,
                    link : function(scope, element) {
						add_hover_target(element, "directive1", "foreign-hover");
						add_hover_target(element, element, "self-hover");
						draggable_list(element, "doodad", "focus", "unfocus", {
							finish: function () {
								droppable_list(element, this, $("directive1"), scope.items2, scope.items1, scope);
                        }});
                    }
                };
            });
		</script>
	</head>

	<body ng-controller="TestCtrl">
    <div>Change this text to see if Browser reloaded: 1</div>
        <di-main></di-main>
	</body>
</html>
